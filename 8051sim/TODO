The next(PC) computation is complete. Computing the next(ACC) is trickier/messier that I expected. I am
considering whether we should compute all state updates at the same time, using a single large formula.

Reintroduce the uncertainty in the PSW.CY location and PSW.Rbank

(if (eq (extract-bit (if 
    (eq (extract 7 7 (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8)))) (bitvecval 0 1)) 
    (read-mem (def-mem IRAM 8 8) (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8)))) 
    (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 128 8)) (def-bitvec P0 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 136 8)) (def-bitvec TCON 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 144 8)) (def-bitvec P1 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 152 8)) (def-bitvec SCON 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 160 8)) (def-bitvec P2 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 168 8)) (def-bitvec IE 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 176 8)) (def-bitvec P3 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 184 8)) (def-bitvec IP 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 208 8)) (def-bitvec PSW 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 224 8)) (def-bitvec ACC 8) (if (eq (if (eq (extract 7 7 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 1 1)) (concat (extract 7 3 (extract 15 8 (def-bitvec opcode 24))) (bitvecval 0 3)) (add (zero-ext (extract 7 3 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 32 8))) (bitvecval 240 8)) (def-bitvec B 8) (bitvecval 0 8))))))))))))) (extract 2 0 (extract 15 8 (def-bitvec opcode 24)))) (bitvecval 1 1)) (add (add (def-bitvec PC 16) (bitvecval 3 16)) (sign-ext (extract 23 16 (def-bitvec opcode 24)))) (add (def-bitvec PC 16) (bitvecval 3 16)))

